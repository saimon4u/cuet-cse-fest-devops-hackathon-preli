Today at 19:59
19:59
Mahmudul
MONGO_INITDB_ROOT_USERNAME=myrootuser
MONGO_INITDB_ROOT_PASSWORD=strongpassword123
MONGO_URI=mongodb://myrootuser:strongpassword123@localhost:27017/mydbname
MONGO_DATABASE=mydbname
BACKEND_PORT=3847
GATEWAY_PORT=5921
NODE_ENV=dev
Mahmudul
docker run -d \
  --name dev-mongodb \
  -p 27017:27017 \
  -e MONGO_INITDB_ROOT_USERNAME=myrootuser \
  -e MONGO_INITDB_ROOT_PASSWORD=strongpassword123 \
  -e MONGO_INITDB_DATABASE=mydbname \
  -v mongo-data:/data/db \
  mongo:latest
Today at 20:19
20:19
Mahdiya Rahman
# Production Dockerfile for Backend Service
# Multi-stage build for optimal image size and security

# Stage 1: Build stage
FROM node:18-alpine AS builder

# Set working directory
WORKDIR /app

# Copy package files
COPY package*.json ./

# Install ALL dependencies (including devDependencies for build)
RUN npm ci --only=production=false

# Copy source code
COPY . .

# Build TypeScript to JavaScript
RUN npm run build

# Stage 2: Production stage
FROM node:18-alpine AS production

# Create non-root user for security
RUN addgroup -g 1001 -S nodejs && \
    adduser -S backend -u 1001

# Set working directory
WORKDIR /app

# Copy package files
COPY package*.json ./

# Install only production dependencies
RUN npm ci --only=production && \
    npm cache clean --force

# Copy built application from builder stage
COPY --from=builder /app/dist ./dist

# Change ownership of the app directory to the nodejs user
RUN chown -R backend:nodejs /app

# Switch to non-root user
USER backend

# Expose the backend port (3847 as specified in requirements)
EXPOSE 3847

# Health check to ensure the service is running
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
    CMD node -e "require('http').get('http://localhost:3847/api/health', (res) => { process.exit(res.statusCode === 200 ? 0 : 1) })"

# Start the application
CMD ["npm", "start"]
Mahdiya Rahman
# Development Dockerfile for Backend Service
# Optimized for development with hot-reload capabilities

FROM node:18-alpine

# Install dumb-init for proper signal handling
RUN apk add --no-cache dumb-init

# Create non-root user for security (even in dev)
RUN addgroup -g 1001 -S nodejs && \
    adduser -S backend -u 1001

# Set working directory
WORKDIR /app

# Copy package files first (for better layer caching)
COPY package*.json ./

# Install all dependencies (including dev dependencies)
RUN npm ci

# Copy source code
COPY . .

# Change ownership of the app directory to the nodejs user
RUN chown -R backend:nodejs /app

# Switch to non-root user
USER backend

# Expose the backend port (3847 as specified in requirements)
EXPOSE 3847

# Health check for development
HEALTHCHECK --interval=30s --timeout=3s --start-period=10s --retries=3 \
    CMD node -e "require('http').get('http://localhost:3847/api/health', (res) => { process.exit(res.statusCode === 200 ? 0 : 1) })"

# Use dumb-init to handle signals properly and start development server with hot-reload
ENTRYPOINT ["dumb-init", "--"]
CMD ["npm", "run", "dev"]
Today at 20:41
20:41
Mahdiya Rahman
version: '3.8'

services:
  # MongoDB Database Service
  mongodb:
    image: mongo:7-jammy
    container_name: ecom_mongodb_prod
    restart: always
    environment:
      MONGO_INITDB_ROOT_USERNAME: ${MONGO_INITDB_ROOT_USERNAME}
      MONGO_INITDB_ROOT_PASSWORD: ${MONGO_INITDB_ROOT_PASSWORD}
      MONGO_INITDB_DATABASE: ${MONGO_DATABASE}
    # NO external ports exposed for security
    volumes:
      # Data persistence across container restarts
      - mongodb_data:/data/db
      - mongodb_config:/data/configdb
    networks:
      - ecom_network
    healthcheck:
      test: [
        "CMD", 
        "mongosh", 
        "--eval", 
        "db.adminCommand('ping')"
      ]
      interval: 30s
      timeout: 10s
      retries: 5
      start_period: 40s
    # Security: MongoDB runs as non-root
    user: "999:999"
    # Resource limits for production
    deploy:
      resources:
        limits:
          cpus: '1.0'
          memory: 1G
        reservations:
          cpus: '0.5'
          memory: 512M

  # Backend Service
  backend:
    build:
      context: ../backend
      dockerfile: Dockerfile
    container_name: ecom_backend_prod
    restart: always
    environment:
      NODE_ENV: production
      MONGO_URI: mongodb://${MONGO_INITDB_ROOT_USERNAME}:${MONGO_INITDB_ROOT_PASSWORD}@mongodb:27017/${MONGO_DATABASE}?authSource=admin
      MONGO_DATABASE: ${MONGO_DATABASE}
      BACKEND_PORT: ${BACKEND_PORT}
    # NO external ports exposed - only accessible via gateway
    networks:
      - ecom_network
    depends_on:
      mongodb:
        condition: service_healthy
    healthcheck:
      test: [
        "CMD", 
        "node", 
        "-e", 
        "require('http').get('http://localhost:${BACKEND_PORT}/api/health', (res) => { process.exit(res.statusCode === 200 ? 0 : 1) })"
      ]
      interval: 30s
      timeout: 10s
      retries: 5
      start_period: 30s
    # Resource limits for production
    deploy:
      resources:
        limits:
          cpus: '0.5'
          memory: 512M
        reservations:
          cpus: '0.25'
          memory: 256M
    # Security: read-only filesystem except for temp directories
    read_only: true
    tmpfs:
      - /tmp
      - /var/tmp

  # Gateway Service (Only exposed service)
  gateway:
    build:
      context: ../gateway
      dockerfile: Dockerfile
    container_name: ecom_gateway_prod
    restart: always
    environment:
      NODE_ENV: production
      GATEWAY_PORT: ${GATEWAY_PORT}
      BACKEND_URL: http://backend:${BACKEND_PORT}
    ports:
      # Only gateway is exposed to external network
      - "${GATEWAY_PORT}:${GATEWAY_PORT}"
    networks:
      - ecom_network
    depends_on:
      backend:
        condition: service_healthy
    healthcheck:
      test: [
        "CMD", 
        "node", 
        "-e", 
        "require('http').get('http://localhost:${GATEWAY_PORT}/health', (res) => { process.exit(res.statusCode === 200 ? 0 : 1) })"
      ]
      interval: 30s
      timeout: 10s
      retries: 5
      start_period: 20s
    # Resource limits for production
    deploy:
      resources:
        limits:
          cpus: '0.5'
          memory: 512M
        reservations:
          cpus: '0.25'
          memory: 256M
    # Security: read-only filesystem except for temp directories
    read_only: true
    tmpfs:
      - /tmp
      - /var/tmp

# Networks - Internal communication only
networks:
  ecom_network:
    driver: bridge
    name: ecom_prod_network
    internal: false  # Allow external access only via gateway
    ipam:
      driver: default
      config:
        - subnet: 172.20.0.0/16

# Volumes for data persistence
volumes:
  mongodb_data:
    name: ecom_mongodb_data_prod
  mongodb_config:
    name: ecom_mongodb_config_prod
Mahdiya Rahman
version: '3.8'

services:
  # MongoDB Database Service
  mongodb:
    image: mongo:7-jammy
    container_name: ecom_mongodb_dev
    restart: unless-stopped
    environment:
      MONGO_INITDB_ROOT_USERNAME: ${MONGO_INITDB_ROOT_USERNAME}
      MONGO_INITDB_ROOT_PASSWORD: ${MONGO_INITDB_ROOT_PASSWORD}
      MONGO_INITDB_DATABASE: ${MONGO_DATABASE}
    ports:
      # Expose MongoDB port for development debugging only
      - "27017:27017"
    volumes:
      # Data persistence across container restarts
      - mongodb_data:/data/db
      - mongodb_config:/data/configdb
    networks:
      - ecom_network
    healthcheck:
      test: [
        "CMD", 
        "mongosh", 
        "--eval", 
        "db.adminCommand('ping')"
      ]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

  # Backend Service
  backend:
    build:
      context: ../backend
      dockerfile: Dockerfile.dev
    container_name: ecom_backend_dev
    restart: unless-stopped
    environment:
      NODE_ENV: development
      MONGO_URI: mongodb://${MONGO_INITDB_ROOT_USERNAME}:${MONGO_INITDB_ROOT_PASSWORD}@mongodb:27017/${MONGO_DATABASE}?authSource=admin
      MONGO_DATABASE: ${MONGO_DATABASE}
      BACKEND_PORT: ${BACKEND_PORT}
    ports:
      # Expose backend port for development debugging only
      - "${BACKEND_PORT}:${BACKEND_PORT}"
    volumes:
      # Hot-reload: mount source code for development
      - ../backend/src:/app/src:ro
      - ../backend/package.json:/app/package.json:ro
      - /app/node_modules
    networks:
      - ecom_network
    depends_on:
      mongodb:
        condition: service_healthy
    healthcheck:
      test: [
        "CMD", 
        "node", 
        "-e", 
        "require('http').get('http://localhost:${BACKEND_PORT}/api/health', (res) => { process.exit(res.statusCode === 200 ? 0 : 1) })"
      ]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 30s

  # Gateway Service (Only exposed service)
  gateway:
    build:
      context: ../gateway
      dockerfile: Dockerfile.dev
    container_name: ecom_gateway_dev
    restart: unless-stopped
    environment:
      NODE_ENV: development
      GATEWAY_PORT: ${GATEWAY_PORT}
      BACKEND_URL: http://backend:${BACKEND_PORT}
    ports:
      # Only gateway is exposed to external network
      - "${GATEWAY_PORT}:${GATEWAY_PORT}"
    volumes:
      # Hot-reload: mount source code for development
      - ../gateway/src:/app/src:ro
      - ../gateway/package.json:/app/package.json:ro
      - /app/node_modules
    networks:
      - ecom_network
    depends_on:
      backend:
        condition: service_healthy
    healthcheck:
      test: [
        "CMD", 
        "node", 
        "-e", 
        "require('http').get('http://localhost:${GATEWAY_PORT}/health', (res) => { process.exit(res.statusCode === 200 ? 0 : 1) })"
      ]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 20s

# Networks
networks:
  ecom_network:
    driver: bridge
    name: ecom_dev_network

# Volumes for data persistence
volumes:
  mongodb_data:
    name: ecom_mongodb_data_dev
  mongodb_config:
    name: ecom_mongodb_config_dev
Today at 21:28
21:28
Mahmudul
FROM node:18-alpine

RUN addgroup -g 1001 -S nodejs && adduser -S backend -u 1001

WORKDIR /app

COPY package*.json ./

RUN npm ci

COPY . .

RUN chown -R backend:nodejs /app

USER backend

EXPOSE 5921

CMD ["npm", "run", "dev"]
Mahmudul
FROM node:18-alpine AS builder

WORKDIR /app

COPY package*.json ./

RUN npm ci --production

COPY . .

RUN npm run build

FROM node:18-alpine AS production

RUN addgroup -g 1001 -S nodejs && adduser -S backend -u 1001

COPY --from=builder /app/dist ./dist
COPY --from=builder /app/node_modules ./node_modules

RUN chown -R backend:nodejs /app

USER backend

EXPOSE 5921

CMD ["npm", "start"]
Today at 21:45
21:45
Mahdiya Rahman
# Environment files
.env*
secrets/

# Node.js
node_modules/
npm-debug.log*
.npm

# Git
.git/
.gitignore

# Documentation
README.md
*.md

# Development files
.vscode/
.idea/

# Build output (exclude from context)
dist/

# Docker files (exclude from other service contexts)
Dockerfile*
docker-compose*.yml
docker/

# Logs
*.log
logs/

# OS files
.DS_Store
Thumbs.db

# Temporary files
tmp/
temp/
Exclusive Software Deals for Developers and Startups - Dealsbe
Mahdiya Rahman
.env*
node_modules/
.git/
.gitignore
README.md
Exclusive Software Deals for Developers and Startups - Dealsbe
Mahmudul
FROM node:18-alpine AS builder

RUN addgroup -g 1001 -S nodejs && adduser -S backend -u 1001

WORKDIR /app

COPY package*.json ./

RUN npm ci --production

COPY . .

RUN chown -R backend:nodejs /app

USER backend

EXPOSE 5921

CMD ["npm", "start"]
Mahmudul
FROM node:18-alpine

RUN addgroup -g 1001 -S nodejs && adduser -S backend -u 1001

WORKDIR /app

COPY package*.json ./

RUN npm ci --include=dev

COPY . .

RUN chown -R backend:nodejs /app

USER backend

EXPOSE 5921

CMD ["npm", "run", "dev"]
Mahmudul
MONGO_INITDB_ROOT_USERNAME="myrootuser"
MONGO_INITDB_ROOT_PASSWORD="strongpassword123"
MONGO_URI="mongodb://myrootuser:strongpassword123@localhost:27017/mydbname"
MONGO_DATABASE="mydbname"
BACKEND_PORT="3847"
GATEWAY_PORT="5921"
NODE_ENV="prod"
Mahmudul
FROM node:18-alpine AS builder

WORKDIR /app

COPY package*.json ./

RUN npm ci --production

COPY . .

RUN npm run build

FROM node:18-alpine AS production

RUN addgroup -g 1001 -S nodejs && adduser -S backend -u 1001

WORKDIR /app

COPY --from=builder /app/package*.json ./
COPY --from=builder /app/dist ./dist
COPY --from=builder /app/node_modules ./node_modules

RUN chown -R backend:nodejs /app

USER backend

EXPOSE 3847

CMD ["npm", "start"]
Mahmudul
FROM node:18-alpine

RUN addgroup -g 1001 -S nodejs && adduser -S backend -u 1001

WORKDIR /app

COPY package*.json ./

RUN npm ci --include=dev

COPY . .

RUN chown -R backend:nodejs /app

USER backend

EXPOSE 3847

CMD ["npm", "run", "dev"]


